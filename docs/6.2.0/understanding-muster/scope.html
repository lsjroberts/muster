<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Scope · Muster</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Like most programming languages, muster has a concept of scope. In Muster, scopes are used to create a self-contained parts of a graph, that have no access to the &amp;quot;outside world&amp;quot; apart from the nodes that are explicitly injected to it. Take a look at these examples, first without a scope:&lt;/p&gt;
"/><meta name="docsearch:version" content="6.2.0"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Scope · Muster"/><meta property="og:type" content="website"/><meta property="og:url" content="https://dwstech.github.io/muster/index.html"/><meta property="og:description" content="&lt;p&gt;Like most programming languages, muster has a concept of scope. In Muster, scopes are used to create a self-contained parts of a graph, that have no access to the &amp;quot;outside world&amp;quot; apart from the nodes that are explicitly injected to it. Take a look at these examples, first without a scope:&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/muster/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/vs2015.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-129699840-1"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-129699840-1');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab"/><link rel="stylesheet" href="https://unpkg.com/tippy.js@3/dist/themes/light.css"/><script type="text/javascript" src="https://cdn.polyfill.io/v2/polyfill.min.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js" async=""></script><script type="text/javascript" src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js" async=""></script><script type="text/javascript" src="/muster/js/code-blocks-buttons.js" async=""></script><script type="text/javascript" src="/muster/js/glossary.min.js" async=""></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><link rel="stylesheet" href="/muster/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/muster/"><h2 class="headerTitle">Muster</h2></a><a href="/muster/versions"><h3>6.2.0</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/muster/docs/6.2.0/overview" target="_self">Docs</a></li><li class=""><a href="/muster/api/" target="_self">API reference</a></li><li class=""><a href="/muster/playground/" target="_self">Playground</a></li><li class="siteNavGroupActive"><a href="/muster/docs/6.2.0/resources/faq" target="_self">FAQ</a></li><li class=""><a href="/muster/help" target="_self">Help</a></li><li class=""><a href="https://github.com/dwstech/muster" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Understanding Muster</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/overview">Muster Overview</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Learn</h3><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/graph-structure">Graph Data Structure</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/nodes">Nodes</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/variables">Variables</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/async-data">Asynchronous Data</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/functions">Functions</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/collections">Collections</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/learn/control-flow">Control Flow</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Understanding Muster</h3><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/data-store">How Muster Stores Data</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/resolution-chains">Resolution Chains</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/explicit-definition">Explicit Definitions</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/lifecycle-of-a-node">Lifecycle of a Node</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/scope">Scope</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/crafting-muster-nodes">Crafting Muster Nodes</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/optimisation">Optimisation*</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/understanding-muster/security">Security*</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorials</h3><ul><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Muster</h4><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-server">Muster on the Server</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-worker">Running Muster in a Worker</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-cookbook">Muster Cookbook</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-testing">Muster Unit Testing</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Muster React</h4><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-react-tutorial">Muster React Tutorial</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-react-cookbook">Muster React Cookbook</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/tutorials/muster-react-testing">Muster React Unit Testing</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Resources</h3><ul><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/resources/setup">Setup</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/resources/faq">Frequently Asked Questions (FAQ)</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/resources/essential-nodes">Essential Nodes</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/resources/common-muster-errors">Common Muster Errors</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/resources/thinking-in-muster">Thinking in Muster*</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/glossary">Glossary</a></li><li class="navListItem"><a class="navItem" href="/muster/docs/6.2.0/changelog">Latest Changes</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/dwstech/muster/edit/develop/packages/website/docs/05-scope.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Scope</h1></header><article><div><span><p>Like most programming languages, muster has a concept of scope. In Muster, scopes are used to create a self-contained parts of a graph, that have no access to the &quot;outside world&quot; apart from the nodes that are explicitly injected to it. Take a look at these examples, first without a scope:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">someValue</span>: <span class="hljs-string">'top-level value'</span>,
  <span class="hljs-attr">nested</span>: {
    <span class="hljs-attr">someValue</span>: <span class="hljs-string">'nested value'</span>,
    <span class="hljs-attr">refToSomeValue</span>: ref(<span class="hljs-string">'someValue'</span>),
  },
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'nested'</span>, <span class="hljs-string">'refToSomeValue'</span>));
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// top-level value</span>
</code></pre>
<p>And now for an example with <code>scope()</code>:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { ref, scope } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">someValue</span>: <span class="hljs-string">'top-level value'</span>,
  <span class="hljs-attr">nested</span>: scope({
    <span class="hljs-attr">someValue</span>: <span class="hljs-string">'nested value'</span>,
    <span class="hljs-attr">refToSomeValue</span>: ref(<span class="hljs-string">'someValue'</span>),
  }),
});

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.resolve(ref(<span class="hljs-string">'nested'</span>, <span class="hljs-string">'refToSomeValue'</span>));
<span class="hljs-built_in">console</span>.log(result);

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// nested value</span>
</code></pre>
<p>Even though the definition of the graph hasn't changed much between examples, the output changed quite significantly. This is due to the fact that the <code>scope()</code> node begins a new graph, and all refs used within that scope start their traversal from the root of that scope, and not from the root of the graph as they usually do.
This behaviour is quite useful when making self-contained pieces of logic, and it makes sure that the logic you build doesn't depend on its place in the graph.</p>
<p>The <code>scope()</code> node doesn't have to be completely isolated from the graph it is used in. This is where the <code>context()</code> node comes in.
While defining a scope, you can inject some context values into your scope. These context values retain their connection to the original graph, and so they also re-emit values when the value of an original node changed:</p>
<pre><code class="hljs css language-javascript"><span class="hljs-keyword">import</span> muster, { context, ref, scope, variable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dws/muster'</span>;

<span class="hljs-keyword">const</span> app = muster({
  <span class="hljs-attr">firstName</span>: variable(<span class="hljs-string">'Bob'</span>),
  <span class="hljs-attr">myScope</span>: scope(
    {
      <span class="hljs-attr">greeting</span>: computed(
        [context(<span class="hljs-string">'userFirstName'</span>)],
        (firstName) =&gt; <span class="hljs-string">`Hello, <span class="hljs-subst">${firstName}</span>!`</span>,
      ),
    },
    {
      <span class="hljs-comment">// The key doesn't have to be the same as the field it points to</span>
      userFirstName: ref(<span class="hljs-string">'firstName'</span>),
    },
  ),
});

app.resolve(ref(<span class="hljs-string">'myScope'</span>, <span class="hljs-string">'greeting'</span>)).subscribe(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
  <span class="hljs-built_in">console</span>.log(result);
});

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Setting `firstName`'</span>)
<span class="hljs-keyword">await</span> app.resolve(set(<span class="hljs-string">'firstName'</span>, <span class="hljs-string">'Jane'</span>));

<span class="hljs-comment">// Console output:</span>
<span class="hljs-comment">// Hello, Bob!</span>
<span class="hljs-comment">// Setting `firstName`</span>
<span class="hljs-comment">// Hello, Jane!</span>
</code></pre>
<p>As before, the first argument of the <code>scope()</code> node defines the scoped graph, but now we're also specifying the second argument, which defines a map between context name and a node that should be resolved in the graph in which the <code>scope()</code> node is defined in.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2018-12-4</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/muster/docs/6.2.0/understanding-muster/lifecycle-of-a-node"><span class="arrow-prev">← </span><span>Lifecycle of a Node</span></a><a class="docs-next button" href="/muster/docs/6.2.0/understanding-muster/crafting-muster-nodes"><span>Crafting Muster Nodes</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/muster/" class="nav-home"><img src="/muster/img/muster.svg" alt="Muster" width="66" height="58"/></a><div><h5>Docs</h5><a href="/muster/docs/overview.html">Overview</a><a href="/muster/docs/learn/introduction.html">Guides</a><a href="/muster/api/">API Reference</a><a href="/muster/playground/">Playground</a><a href="/muster/docs/resources/faq.html">FAQ</a></div><div><h5>Community</h5><a href="/muster/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/muster" target="_blank" rel="noreferrer noopener">Stack Overflow</a></div><div><h5>More</h5><a href="/muster/docs/changelog.html">Changelog</a><a href="https://github.com/dwstech/muster">GitHub</a><a class="github-button" href="https://github.com/dwstech/muster" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://www.github.com/dwstech/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/muster/img/dws-logo-global.svg" alt="DWS Technology Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 DWS Technology</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '4f4b66eff796f1e1d48be066f0ac4cae',
                indexName: 'muster',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:6.2.0"]}
              });
            </script></body></html>